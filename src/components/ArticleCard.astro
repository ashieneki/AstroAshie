---
import dayjs from 'dayjs';
export interface Props {
  title: string;
  slug: string;
  publishedAt: Date;
}

const getAddedDayDate = (date: Date, addDay: number): Date => {
  const newDate = new Date(date.getTime())
  newDate.setDate(newDate.getDate() + addDay)
  return newDate
}
---

<article>
  <div class="dateHolder">
    <div class="date">{dayjs(Astro.props.publishedAt).format("YYYY年M月D日")}</div>
    {getAddedDayDate(Astro.props.publishedAt, 30) > new Date() && <div class="newBadge"><span class="newLabel">NEW!</span></div>}
  </div>
  <div class="title"><a href={`/posts/${Astro.props.slug}`}>{Astro.props.title}</a></div>
</article>

<style>
  .dateHolder {
    margin-bottom: 5px;
    display: flex;
    gap: 5px;
    align-items: flex-end;
  }
  .newLabel {
    display: inline-block;
    padding: 2px 10px;
    font-size: 0.8em;
    background-color: var(--primary-color);
    color: var(--white-color);
  }

  .title {
    font-size: 1.5em;
    font-weight: bold;
  }
</style>
